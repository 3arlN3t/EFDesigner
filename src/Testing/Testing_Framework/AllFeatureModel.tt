<#@ template inherits="Microsoft.VisualStudio.TextTemplating.VSHost.ModelingTextTransformation" 
             debug="true"
             hostSpecific="true" 
             language="C#" 
             compilerOptions="/langversion:latest"
#><#@ CleanupBehavior processor="T4VSHost" CleanupAfterProcessingtemplate="true"   
#><#@ assembly name="EnvDTE"
#><#@ assembly name="System.Core"
#><#@ assembly name="System.Data.Entity.Design.dll" 
#><#@ assembly name="System.Data.Linq"
#><#@ assembly name="System.Xml"
#><#@ assembly name="System.Xml.Linq"
#><#@ import namespace="EnvDTE"
#><#@ import namespace="Microsoft.VisualStudio.TextTemplating"
#><#@ import namespace="Sawczyn.EFDesigner.EFModel" 
#><#@ import namespace="System" 
#><#@ import namespace="System.Collections.Generic"
#><#@ import namespace="System.Data.Entity.Design.PluralizationServices" 
#><#@ import namespace="System.Globalization" 
#><#@ import namespace="System.IO"
#><#@ import namespace="System.Linq" 
#><#@ import namespace="System.Text"
#><#@ include file="VSIntegration.ttinclude" once="true"
#><#@ include file="EF6Designer.ttinclude" once="true"
#><#@ include file="EFCoreDesigner.ttinclude" once="true"
#><#@ include file="MultipleOutputHelper.ttinclude" once="true"
#><#@ output extension=".cs" #> 
<#@ EFModel processor="EFModelDirectiveProcessor" requires="FileName='AllFeatureModel.efmodel'"  
#><#
   Manager manager = Manager.Create(Host, GenerationEnvironment);
   manager.FileNameMarker = ModelRoot.FileNameMarker;

   if (ModelRoot.Types.OfType<ModelClass>().Any())
   {
      manager.StartHeader(false);
      Output("//------------------------------------------------------------------------------");
      Output("// <auto-generated>");
      Output("//     This code was generated from a template.");
      Output("//");
      Output("//     Manual changes to this file may cause unexpected behavior in your application.");
      Output("//     Manual changes to this file will be overwritten if the code is regenerated.");
      Output("// </auto-generated>");
      Output("//------------------------------------------------------------------------------");
      NL();

      switch (ModelRoot.EntityFrameworkVersion)
      {
         case EFVersion.EF6:
            EF6.GenerateEF6(manager, this.ModelRoot);
            break;
         case EFVersion.EFCore:
            EFCore.Generate(manager, this.ModelRoot);
            break;
      }

   }

   manager.Process(true);
#>